<html>
<head>
    <meta charset="utf-8">
    <title>RAPID Upload</title>
    <style type="text/css"></style>
</head>

<body>

  <!--------------- Logo Container ----------------->
  <div style="width:100%; margin:auto; margin-top:50px;">
  <div style="width: 600px; margin: auto;">
    <img src="{{ STATIC_URL }}images/CP_Logo.png" alt="Cal Poly Logo" style="margin: auto; margin-right: 1em; height: 6em; padding: 10px">
    <img src="{{ STATIC_URL }}images/PRCI.jpg" alt="PRCI" style="margin: auto; margin-left: 1em; height: 6em; padding: 10px">
    </div>
  </div>
  
  <!--------------- Input Section ------------------>
  <div style="height:600px; margin:auto; margin-top: 50px">
    <div style="border:2px solid darkgrey; display:flex; justify-content:center; align-items: center; height: 100px; max-width: 500px; min-width: 300px; margin: auto; text-align: center;">
    <div style="font-family: Tahoma; font-size: 2em">RAPID Upload</div>
    </div>
    <br><br>
    <div style="margin: auto;display: flex;justify-content: center; font-family: Tahoma">
    <form id="form" action="rapid/uploadFile/" method="post" enctype="multipart/form-data">
           {{ form }}
        <input id="submit" type="submit" value="Submit" disabled>
        </form>
    </div>
    </div> 

    <script>
        var form = document.getElementById('form');
        var input = document.getElementById('id_file');
        var submit = document.getElementById('submit');

            input.onchange = function () {
                if (input.value != '') {
                    var extension = input.value.match(/[\w]+$/g);
                        extension = extension[0].toUpperCase();
                    if (extension == 'ZIP' || extension == 'JSON') {
                        submit.disabled = false;
                        form.action = 'http://127.0.0.1:3000/rapid/uploadFile/'
                        //token_input = document.getElementById('id_token')
                        //token_input.value = token
                    }
                    else {
                        input.value = '';
                        alert("RAPID cannot process files of type " + extension);
                    }
                }
            }
    </script>


</body></html>